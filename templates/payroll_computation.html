{% extends 'index.html' %}

{% block content %}
<style>
    body {
        background-color: gray;
}
</style>

<body>
    <div class="container">
           
                <div class="container  mt-3">
                    <div class="d-flex justify-content-center">
                        <div class="form-group mb-2">
                            <label for="TransactionDate" >Date</label>
                            <input
                                type="date"
                                name="datefrom"
                                id="datefrom"
                                class="form-control"
                                >
                            </input>
        
            
                            <label for="Employee ID" >Employee ID</label>
                            <input
                            type="text"
                            name="employee_id"
                            id="employee_id"
                            class="form-control"
                            >
                            </input>
                            
                           
                                <button type="submit"  onclick="display_emp_data()" class="btn btn-success">
                                    Search Data
                                    <i class="fas fa-database"></i>
                                </button>
                           
                        </div>

                        <div class="form-group mx-sm-3 mb-3">
                                <label for="FirstName" >First Name</label>
                                <input
                                    type="text"
                                    name="fname"
                                    id="fname"
                                    class="form-control"
                                    >
                                </input>

                                <label for="LastName" >Last Name</label>
                                    <input
                                        type="text"
                                        name="lname"
                                        id="lname"
                                        class="form-control"
                                        >
                                    </input>
                        </div>

                        <div class="form-group mx-sm-3 mb-3">
                            <label for="Position" >Position</label>

                            <input
                                type="text"
                                name="position"
                                id="position"
                                class="form-control"
                                >
                            </input>
                            <label for="Salary Rate" >Salary Rate</label>
                                <input
                                    type="number"
                                    step="0.01"
                                    name="salary_rate"
                                    id="salary_rate"
                                    class="form-control"
                                    
                                    >
                                </input>
                            
                            <label for="Provincial Rate" >Provincial Rate</label>
                                <input
                                    type="number"
                                    step="0.01"
                                    name="provi_rate"
                                    id="provi_rate"
                                    class="form-control"
                                    
                                    >
                                </input>

                        </div>

                        <div class="form-group mx-sm-3 mb-3">
                            <label for="Tax Classification" >Tax Classification</label>
                            <input
                                type="text"
                                name="tax_class"
                                id="tax_class"
                                class="form-control"
                                >
                            </input>

                            <label for="EmployeClass" >Employee Class</label>
                                <input
                                    type="text"
                                    name="emp_class"
                                    id="emp_class"
                                
                                    class="form-control"
                                    >
                                </input>

                            <label for="EmployeClass" >Salary Details</label>
                                <input
                                    type="text"
                                    name="salary_details"
                                    id="salary_details"
                                    class="form-control"
                                    
                                    >
                                </input>
                    
                        </div>

                    
                    </div>
                    
                </div>
                
               
                
           
            
              
                

                   

                    

<!--============================== This is start for computation fields============================== -->
                <div class="d-flex justify-content-center">
                    <h1>
                        This is for computation 
                    </h1>
                </div>  
                
                <div class="d-flex justify-content-center">
                    <div class="form-group mx-sm-3 mb-1">
                        <label for="REGDAY"
                        >Regular day</label>
                            <input
                                type="number"
                                step="0.01"
                                name="regday"
                                id="regday"
                                class="form-control"
                                
                                >
                            </input>
                        <label for="regdaycal"
                        >Regday Cal</label>
                            <input
                                type="number"
                                step="0.01"
                                name="regday_cal"
                                id="regday_cal"
                                class="form-control"
                                >
                            </input>
    

                    </div>

                    <div class="form-group mx-sm-3 mb-1">
                        <label for="REGOT"
                        >Regular OT</label>
    
                            <input
                                type="number"
                                step="0.01"
                                name="regday_ot"
                                id="regday_ot"
                                class="form-control"
                                
                                >
                            </input>
                        <label for="REGOT"
                        >RegDay OT Calculation</label>
                            <input
                                type="number"
                                step="0.01"
                                name="regday_ot_cal"
                                id="regday_ot_cal"
                                class="form-control"
                                >
                            </input>

                    </div>

                    <div class="form-group mx-sm-2 mb-1">
                        <label for="SUNDAY"
                        >SUNDAY </label>
                            <input
                                type="number"
                                step="0.01"
                                name="sunday"
                                id="sunday"
                                style="text-align: right;
                                    "
                                class="form-control"
                                >
                            </input>
                            
                        <label for="SUNDAY"
                            >SUNDAY Calculation </label>
    
                            <input
                                type="number"
                                step="0.01"
                                name="sunday_cal"
                                id="sunday_cal"
                                style="text-align: right;
                                    "
                                class="form-control"
                                >
                            </input>

                    </div>

                    <div class="form-group mx-sm-2 mb-1">
                        <label for="SundayOT"
                           
                        >Sunday OT</label>
    
                            <input
                                type="number"
                                step="0.01"
                                name="sunday_ot"
                                id="sunday_ot"
                                style="text-align: right;
                                "
                                class="form-control"
                                
                                >
                            </input>
                        <label for="SundayOT"
                        
                        >Sunday OT Calculation</label>
                            <input
                                type="number"
                                step="0.01"
                                name="sunday_ot_cal"
                                id="sunday_ot_cal"
                                style="text-align: right;
                                    "
                                class="form-control"
                                >
                            </input>

                    </div>
                    
                    
                        

                </div>
                        

                        
    
                        
                <!-- This is for Special Holiday Computation -->
                <div class="d-flex justify-content-center">
                    <div class="form-group mx-sm-2 mb-1">
                        <label for="SPL"
                        >SPL </label>
                            <input
                                type="number"
                                step="0.01"
                                name="spl"
                                id="spl"
                                style="text-align: right;
                                    "
                                class="form-control"
                                
                                >
                            </input>
                        <label for="SPL"
                        >SPL Calculation </label>
                     
    
                            <input
                                type="number"
                                step="0.01"
                                name="spl_cal"
                                id="spl_cal"
                                style="text-align: right;
                                    "
                                class="form-control"
                                >
                            </input>

                    </div>

                    <div class="form-group mx-sm-2 mb-1">
                        <label for="SPLOT"
                           
                        >SPL OT</label>
    
                            <input
                                type="number"
                                step="0.01"
                                name="spl_ot"
                                id="spl_ot"
                                style="text-align: right;
                                        "
                                class="form-control"
                                >
                            </input>

                        <label for="SPLOT"
                           
                        >SPL OT Calculation</label>
    
                            <input
                                type="number"
                                step="0.01"
                                name="spl_ot_cal"
                                id="spl_ot_cal"
                                style="text-align: right;
                                        "
                                class="form-control"
                                >
                            </input>

                    </div>

                    
    
                        
                      

                </div>
                        

    </div>       
                

                    
                    
                
    
    
</body>

        <script type="text/javascript">

            // const rental_url =search_url ;
            async function display_emp_data(){
                var employee_id = document.getElementById("employee_id").value

                const search_url = `/api-search-employee_by_empID/?term=${employee_id}`;


                const responce = await fetch(search_url)
                const data = await responce.json();
                console.log(data)
                console.log(data.length)

                if (responce.status != 200){
                    window.alert("Unauthorized Please Login")

                };

                if (data.length === 0){
                    window.alert(`No ID store for ${employee_id}`)
                }
                else{
                    var name = data[0].firstName
                    var lname = data[0].lastName
                    var position = data[0].position
                    var salary_rate = data[0].salary_rate
                    var taxCode = data[0].taxCode
                    var off_on_details = data[0].off_on_details
                    var salary_details = data[0].Salary_Detail

                    document.getElementById('fname').value = name
                    document.getElementById('lname').value = lname
                    document.getElementById('position').value = position
                    document.getElementById('salary_rate').value = salary_rate
                    document.getElementById('tax_class').value = taxCode
                    document.getElementById('emp_class').value = off_on_details
                    document.getElementById('salary_details').value = salary_details

                }
                
                
                
                
            }

            
            

        </script>

        

        </script>

        <script type="text/javascript">
            document.getElementById('regday').addEventListener('input',
            function(e){
                let regday = e.target.value;
                var salDetails = document.getElementById('salary_details').value;
               
                var salaryRate;
                var regdayCal;
               

                if (salDetails == 'Monthly'){
                    salaryRate =  document.getElementById('salary_rate').value / 26;
                    regdayCal = parseFloat(salaryRate) * parseFloat(regday)
                    document.getElementById('regday_cal').value=regdayCal.toFixed(2);
                    
                }else{
                    salaryRate =  document.getElementById('salary_rate').value;
                    regdayCal = parseFloat(salaryRate) * parseFloat(regday)
                    document.getElementById('regday_cal').value=regdayCal.toFixed(2);
                }
                
                
                
            }
            );

        </script>

        <script type="text/javascript">
            document.getElementById('regday_ot').addEventListener('input',
            function(e){
                let regday_ot = e.target.value;

                var salDetails = document.getElementById('salary_details').value;
                var salaryRate;
                var regday_otCal;

                if (salDetails == 'Monthly'){
                    salaryRate =  document.getElementById('salary_rate').value / 26;
                    regday_otCal = parseFloat(salaryRate) / 8 * 1.25 * parseFloat(regday_ot)
                    document.getElementById('regday_ot_cal').value=regday_otCal.toFixed(2);
                }else{
                    salaryRate =  document.getElementById('salary_rate').value ;
                    regday_otCal = parseFloat(salaryRate) / 8 * 1.25 * parseFloat(regday_ot)
                    document.getElementById('regday_ot_cal').value=regday_otCal.toFixed(2);

                }
   
            }
            );

        </script>

        <script type="text/javascript">
            document.getElementById('sunday').addEventListener('input',
            function(e){
                let sundayReg = e.target.value;
                var salDetails = document.getElementById('salary_details').value;
                
                var salaryRate;
                
                var sundayReg_cal;

                if (salDetails == 'Monthly'){
                    salaryRate =  document.getElementById('salary_rate').value / 26;
                    sundayReg_cal = parseFloat(salaryRate) * parseFloat(sundayReg) * 1.30
                    document.getElementById('sunday_cal').value=sundayReg_cal.toFixed(2);
                }else{
                    salaryRate =  document.getElementById('salary_rate').value;
                    sundayReg_cal = parseFloat(salaryRate) * parseFloat(sundayReg) * 1.30
                    document.getElementById('sunday_cal').value=sundayReg_cal.toFixed(2);
                }
                
                
                
            }
            );

        </script>

        <script type="text/javascript">
            document.getElementById('sunday_ot').addEventListener('input',
            function(e){
                let sunday_ot = e.target.value;

                var salDetails = document.getElementById('salary_details').value;
                var salaryRate;
                var sunday_otCal;

                if (salDetails == 'Monthly'){
                    salaryRate =  document.getElementById('salary_rate').value / 26;
                    sunday_otCal = parseFloat(salaryRate) / 8 * 1.25 * parseFloat(sunday_ot)
                    document.getElementById('sunday_ot_cal').value=regday_otCal.toFixed(2);
                }else{
                    salaryRate =  document.getElementById('salary_rate').value ;
                    regday_otCal = parseFloat(salaryRate) / 8 * 1.25 * parseFloat(sunday_ot)
                    document.getElementById('sunday_ot_cal').value=regday_otCal.toFixed(2);

                }

            }
            );

        </script>






{% endblock %}