{% extends 'index.html' %}

{% block content %}

<body>
    <div class="container">

    </div>
    <div  class="container">
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <label for="TransactionDate" >Date</label><br>
                <input
                    type="date"
                    name="datefrom"
                    id="datefrom"
                    >
                </input>

            
                
                <br>
                    <label for="Employee ID" >Employee ID</label><br>
                        <input
                            type="text"
                            name="employee_id"
                            id="employee_id"
                            >
                        </input>

                        <button type="submit"  onclick="display_emp_data()" class="btn btn-success">
                            Search Data
                            <i class="fas fa-database"></i>
                        </button>
                        
                        <br> 

                    <label for="FirstName" >First Name</label><br>
                        <input
                            type="text"
                            name="fname"
                            id="fname"
                            >
                        </input><br>

                    <label for="LastName" >Last Name</label><br>
                        <input
                            type="text"
                            name="lname"
                            id="lname"
                            >
                        </input><br>

                    <label for="Position" >Position</label><br>

                            <input
                                type="text"
                                name="position"
                                id="position"
                               
                                >
                            </input><br>
                    <label for="Salary Rate" >Salary Rate</label><br>
                            <input
                                type="number"
                                step="0.01"
                                name="salary_rate"
                                id="salary_rate"
                                
                                
                                
                                >
                            </input><br>

                    <label for="Tax Classification" >Tax Classification</label><br>
                            <input
                                type="text"
                                name="tax_class"
                                id="tax_class"
                                
                                >
                            </input><br>

                    <label for="EmployeClass" >Employee Class</label><br>
                            <input
                                type="text"
                                name="emp_class"
                                id="emp_class"
                               
                                
                                >
                            </input>

<!-- This is start for computation fields -->
               
                    <h1>
                        This is for computation 
                    </h1>
                    
                        <label for="REGDAY"
                        style="margin-left: 0x;"
                        >Regular day</label>
                        <input
                            type="number"
                            step="0.01"
                            name="regday"
                            id="regday"
                            style="width: 65px;text-align: right;"
                            
                            >
                        </input>
    
                        <input
                            type="number"
                            step="0.01"
                            name="regday_cal"
                            id="regday_cal"
                            style="width: 100px;text-align: right;"
                            >
                        </input>
    
                        <label for="REGOT"
                        style="margin-left: 30px;"
                        >Regular OT</label>
    
                        <input
                            type="number"
                            step="0.01"
                            name="regday_ot"
                            id="regday_ot"
                            style="width: 65px;text-align: right; "
                            
                            >
                        </input>
    
                        <input
                            type="number"
                            step="0.01"
                            name="regday_ot_cal"
                            id="regday_ot_cal"
                            style="width: 100px;text-align: right;"
                            >
                        </input><br><br>

                        <label for="SUNDAY"
                        
                        >SUNDAY </label>
                        <input
                            type="number"
                            step="0.01"
                            name="sunday"
                            id="sunday"
                            style="width: 65px;text-align: right;
                                   margin-left: 25px;"
                            
                            >
                        </input>
    
                        <input
                            type="number"
                            step="0.01"
                            name="sunday_cal"
                            id="sunday_cal"
                            style="width: 100px;text-align: right;"
                            >
                        </input>
    
                        <label for="SundayOT"
                            style="margin-left: 28px;"
                        >Sunday OT</label>
    
                        <input
                            type="number"
                            step="0.01"
                            name="sunday_ot"
                            id="sunday_ot"
                            style="width: 65px;text-align: right;"
                            
                            >
                        </input>
    
                        <input
                            type="number"
                            step="0.01"
                            name="sunday_ot_cal"
                            id="sunday_ot_cal"
                            style="width: 100px;text-align: right;"
                            >
                        </input><br><br>
                <!-- This is for Special Holiday Computation -->
                        <label for="SPL"
                        
                        >SPL </label>
                        <input
                            type="number"
                            step="0.01"
                            name="spl"
                            id="spl"
                            style="width: 65px;text-align: right;
                                   margin-left: 60px;"
                            
                            >
                        </input>
    
                        <input
                            type="number"
                            step="0.01"
                            name="spl_cal"
                            id="spl_cal"
                            style="width: 100px;text-align: right;"
                            >
                        </input>
    
                        <label for="SPLOT"
                            style="margin-left: 28px;"
                        >SPL OT</label>
    
                        <input
                            type="number"
                            step="0.01"
                            name="spl_ot"
                            id="spl_ot"
                            style="width: 65px;text-align: right;
                                    margin-left: 28px"
                            
                            >
                        </input>
    
                        <input
                            type="number"
                            step="0.01"
                            name="spl_ot_cal"
                            id="spl_ot_cal"
                            style="width: 100px;text-align: right;"
                            >
                        </input><br><br>
                      

               
                

                    
                    
                
            </div>
        </div>
        
    </div>

    
</body>

        <script type="text/javascript">

            // const rental_url =search_url ;
            async function display_emp_data(){
                var employee_id = document.getElementById("employee_id").value

                const search_url = `/api-search-employee_by_empID/?term=${employee_id}`;


                const responce = await fetch(search_url)
                const data = await responce.json();
                console.log(data)
                console.log(data.length)

                if (responce.status != 200){
                    window.alert("Unauthorized Please Login")

                };

                if (data.length === 0){
                    window.alert(`No ID store for ${employee_id}`)
                }
                else{
                    var name = data[0].firstName
                    var lname = data[0].lastName
                    var position = data[0].position
                    var salary_rate = data[0].salary_rate
                    var taxCode = data[0].taxCode
                    var off_on_details = data[0].off_on_details


                    document.getElementById('fname').value = name
                    document.getElementById('lname').value = lname
                    document.getElementById('position').value = position
                    document.getElementById('salary_rate').value = salary_rate
                    document.getElementById('tax_class').value = taxCode
                    document.getElementById('emp_class').value = off_on_details

                }
                
                
                
                
            }

            
            

        </script>

        

        </script>

        <script type="text/javascript">
            document.getElementById('regday').addEventListener('input',
            function(e){
                let regday = e.target.value;
                let salaryRate =  document.getElementById('salary_rate').value;
                let regdayCal = parseFloat(salaryRate) * parseFloat(regday)
                document.getElementById('regday_cal').value=regdayCal.toFixed(2);
            }
            );

        </script>

        <script type="text/javascript">
            document.getElementById('regday_ot').addEventListener('input',
            function(e){
                let regday_ot = e.target.value;
                let salaryRate =  document.getElementById('salary_rate').value;
                let regday_otCal = parseFloat(salaryRate) / 8 * 1.25 * parseFloat(regday_ot)
                document.getElementById('regday_ot_cal').value=regday_otCal.toFixed(2);
            }
            );

        </script>




{% endblock %}