
{% extends 'index.html' %}



{% block content %}
<style>
    /* #addRoutes.modal{
        display: flex;
        align-items: center;
        justify-content: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
} */
</style>
<body>
    <div class="container">
        <h2>
            EMPLOYEE TRANSACTIONS TVI
        </h2>
    </div>
   
   <div class="container">

        <div class="container mt-3">
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#insertEquipmentRental">
                Insert Rental
            </button>

            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#rentalList">
                Rental List
            </button>
            
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#rentalReportList">
                Rental Report List
            </button>
            
            <br><br>

            <button type="button" class="btn btn-success" data-toggle="modal" data-target="#insertDieselTransaction">
                Insert Diesel
            </button>

            <button type="button" class="btn btn-success" data-toggle="modal" data-target="#dieselList">
                Diesel List
            </button>

            <button type="button" class="btn btn-success" data-toggle="modal" data-target="#dieselReportList">
                Diesel Report List
            </button>

            
            <br><br>


           


            <!-- <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#insertTonnage">
                Insert Tons
            </button>

            <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#tonnageList">
                Tonnage List
            </button><br><br> -->

            <button type="button" class="btn btn-info" data-toggle="modal" data-target="#insertcost">
                Insert Cost
            </button>

            <button type="button" class="btn btn-info" data-toggle="modal" data-target="#costList">
                Cost List
            </button><br><br>

            <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#addRoutes">
                Add Routes
            </button>

            <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#AddTons">
                Add Tonnage
            </button>

            <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#tonnageList">
                Tonnage List
            </button>

            <br><br>

            

            <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#incentivesList">
                Incentive List
            </button>

            <br><br>

            <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#employeeList">
                Employee List
            </button>

            
            
        </div>
            <!-- Modal Rental -->
            <div class="modal fade" id="insertEquipmentRental" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Insert Rental Transaction</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>

                    
                    <div class="modal-body">

                        <label for="TransactionDate" >Transaction Date</label><br>
                        <input
                            type="date"
                            name="trans_date"
                            id="trans_date"
                            class="form-control"
                            >
                        </input>

                        <label for="Equipment" >DEMR</label>
                        <input
                            type="text"
                            name="demr_form"
                            id="demr_form"
                           
                            class="form-control"
                            >
                        </input>  

                        <label for="Equipment" >Equipment</label>
                        <input
                            type="text"
                            name="equipment_id"
                            id="equipment_id"
                           
                            class="form-control"
                            >
                        </input>  

                        <label for="Equipment" >Time IN</label>
                            <input
                                type="datetime-local"
                                name="start"
                                id="start"
                                class="form-control"
                                >
                            </input>  
                        <label for="Equipment" >Time OUT</label>
                            <input
                                type="datetime-local"
                                name="end"
                                id="end"
                                class="form-control"
                                >
                            </input>  
                        <!-- <label for="Equipment" >Total Rental Hours Computation</label>
                            <input
                            type="number"
                            name="totalHours"
                            id="totalHours"
                            step="0.01"
                            class="form-control"
                            
                            >
                            </input>   -->

                        <label for="Total Hours" >Total Hours</label>
                            <input
                            type="number"
                            name="total_rental_hour"
                            id="total_rental_hour"
                            step="0.01"
                            class="form-control"
                            
                            >
                            </input>  

                        <label for="Rental Rate" >Rental Rate</label>
                            <input
                                type="number"
                                name="rental_rate"
                                id="rental_rate"
                                step="0.01"
                                class="form-control"
                                
                                >
                            </input> 

                        
                            <input
                                type="number" hidden
                                name="rental_amount"
                                id="rental_amount"
                                class="form-control"
                                
                                >
                            </input>  

                        
                        <label for="Amount" >Amount</label>
                            <input
                                type="text"
                                name="rental_amount2"
                                id="rental_amount2"
                                class="form-control"
                                
                                >
                        </input> 
                        
                        
                        <label for="Tax Rate"
                        >Tax Rate</label>
                        
                            <input 
                                type="number"
                                name="taxRateTransaction"
                                id="taxRateTransaction"
                                step="0.01"
                                class="form-control"
                                >
                            </input>

                        <label for="Vat Output"
                            >Vat Output</label>
                            
                            <input 
                                type="number"
                                name="vatOutputRentalTrans"
                                id="vatOutputRentalTrans"
                                step="0.01"
                                class="form-control"
                                >
                            </input>

                        <label for="NetofVat"
                            >Net of VAt</label>
                            
                            <input 
                                type="number"
                                name="netOfVAtRentalTrans"
                                id="netOfVAtRentalTrans"
                                step="0.01"
                                class="form-control"
                                >
                            </input>
                        <label for="Project" >Project</label>
                            <input
                                type="text"
                                name="project_site"
                                id="project_site"
                                class="form-control"
                                
                                >
                        </input> 


                        <label for="driverOperator" >Driver/Operator</label>
                            <input
                                type="text"
                                name="driverOperator"
                                id="driverOperator"
                                class="form-control"
                                
                                >
                        </input> 
                        
            
                    
                    </div>
                    <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" id="buttonSave" onclick="insertRental()"class="btn btn-primary">Save</button>
                    <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                    
                    </div>
                </div>
                </div>
            </div>


             <!-- this is for Rental Modal List -->
         <div class="modal fade" id="rentalList" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Rental List</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

        <div class="modal-body">
            <div class="container mt-3">
                <label for="TransactionDate" >Date From</label>
                <input
                    type="date"
                    name="datefromRental"
                    id="datefromRental"
                    >
                </input>  

            <label for="TransactionDate" >Date To</label>
                <input
                    type="date"
                    name="datetoRental"
                    id="datetoRental"
                    >
                </input>  

            <label for="Equipment" >Equipment</label>
                <input
                    type="text"
                    name="equipment_id_searchRental"
                    id="equipment_id_searchRental"
                    >
                </input> 
                
            <label for="ProjectSite" >Project Site</label>
                <input
                    type="text"
                    name="project_site_search"
                    id="project_site_search"
                    >
                </input> 

                <button type="submit"  onclick="display_data()" class="btn btn-success">
                    Search Data
                    <i class="fas fa-database"></i>
                </button>

                <button type="submit"  onclick="html_table_excel_rental('xlsx')" class="btn btn-secondary">
                    Export Excel
                    <i class="fas fa-database"></i>
                </button>


                <button type="submit"  onclick="printPageRentalList()" class="btn btn-warning">
                    Print 
                    <i class="fas fa-database"></i>
                </button>

        </div>
        <div  class="container mt-3">
            <table id="myTable" class="table table-bordered"  style="text-align: center;">
                <thead class="table-dark">
                
                        <td>ID</td>
                        <td>Date</td>
                        <td>Equipment ID</td>
                        <td>EUR</td>
                        <td>Total Hour</td>
                        <td>Rental Rate</td>
                        <td>Total Amount</td>
                        <td>Net of Vat</td>
                        <td>Project Site</td>
                        <td>Action</td>
                        
                    </tr>
                </thead>
                <tbody id="table_body">
                
                        
                        <tr>
                            
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    
                    
                </tbody>

            

                </table>

        
            </div>

            
        </div>


            <div class="modal-footer">
                    
                <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                </div>
            </div>
            </div>
        </div>


         <!-- this is for Rental  REPORT Modal List -->
         <div class="modal fade" id="rentalReportList" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Rental List</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

        <div class="modal-body">
            <div class="container mt-3">
                <label for="TransactionDate" >Date From</label>
                <input
                    type="date"
                    name="datefromRental2"
                    id="datefromRental2"
                    >
                </input>  

            <label for="TransactionDate" >Date To</label>
                <input
                    type="date"
                    name="datetoRental2"
                    id="datetoRental2"
                    >
                </input>  

            <label for="Equipment" >Equipment</label>
                <input
                    type="text"
                    name="equipment_id_searchRental2"
                    id="equipment_id_searchRental2"
                    >
                </input> 
                
            

                <button type="submit"  onclick="display_RentalSum()" class="btn btn-success">
                    Search Data
                    <i class="fas fa-database"></i>
                </button>

                

        </div>
        <div  class="container mt-3">
            <table id="myTable" class="table table-bordered"  style="text-align: center;">
                <thead class="table-dark">
                
                        
                        <td>Equipment ID</td>
                        <td>Total Hour</td>
                        <td>Rental Rate</td>
                        <td>Total Amount</td>
                       
                        
                    </tr>
                </thead>
                <tbody id="table_bodyRentalReport">
                
                        
                        <tr>
                            
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            
                        </tr>
                    
                    
                </tbody>

            

                </table>

        
            </div>

            
        </div>


            <div class="modal-footer">
                    
                <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                </div>
            </div>
            </div>
        </div>



            <!-- Modal Insert Diesel Transactions -->
        <div class="modal fade" id="insertDieselTransaction" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Diesel Transaction</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

                
                <div class="modal-body">

                    <label for="TransactionDate"
                    >TransactionDate</label>
                    
                        <input 
                            type="date"
                            name="transDateDiesel"
                            id="transDateDiesel"
                            
                            class="form-control"
                            >
                        </input>
                
                    <label for="EquipmentID"
                    >Equipment ID</label>
                    
                        <input 
                            type="text"
                            name="equipmentIdDiesel"
                            id="equipmentIdDiesel"
                            
                            class="form-control"
                        >
                        </input>

                    

                    <label for="WithSlpi"
                    >Withdrawal Slip</label>
                    
                    <input 
                        type="text"
                        name="withdrawalSlipDiesel"
                        id="withdrawalSlipDiesel"
                        
                        class="form-control"
                        >
                    </input>
                   

                    <label for="TotalLiters"
                        >Total Liters</label>
                        
                        <input 
                            type="number"
                            name="totalliters"
                            id="totalliters"
                            step="0.01"
                            class="form-control"
                            >
                        </input>
                    <label for="Price"
                        >Price</label>
                        
                        <input 
                            type="number"
                            name="priceDiesel"
                            id="priceDiesel"
                            step="0.01"
                            class="form-control"
                            >
                        </input>
                    <label for="Plate Number"
                        >Total Amount</label>
    
                        <input 
                            type="number" hidden
                            name="totalAmountDiesel"
                            id="totalAmountDiesel"
                            step="0.01"
                            class="form-control">
                        </input>

                        <input 
                            type="text" 
                            name="totalAmountDiesel2"
                            id="totalAmountDiesel2"
                            step="0.01"
                            class="form-control">
                        </input>
                    
                  
        
                
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" onclick="insertDiesel()" class="btn btn-primary">Save</button>
                <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                </div>
            </div>
            </div>
        </div>


        


       <!-- Modal for Diesel List -->

        <div class="modal fade" id="dieselList" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog  modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Diesel Transaction List</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

                
                <div class="modal-body">
                    <div class="container mt-3">
                        <label for="dateFrom"
                        >From</label>
                        
                            <input 
                            type="date"
                            name="dateFromDiesel"
                            id="dateFromDiesel"
                           
                            >

                    
                        <label for="dateTo"
                        >To</label>
                        
                            <input 
                            type="date"
                            name="dateToDiesel"
                            id="dateToDiesel"
                           
                            >
                        <label for="Equipment"
                            >Equipment</label>
                            <input 
                            type="text"
                            name="equipmentSearchDieselTrans"
                            id="equipmentSearchDieselTrans"
                            
                            >
                        
                        <button type="submit" onclick="displayDieselData()" class="btn btn-primary">Search</button>

                        <button type="submit"  onclick="html_table_excel('xlsx')" class="btn btn-secondary">
                            Export Excel
                            <i class="fas fa-database"></i>
                        </button>
                    </div>

                    <div  class="container mt-3">
                        <table id="myTableDiesel" class="table table-bordered"  style="text-align: center;">
                            <thead class="table-dark">
                            
                                    <td>ID</td>
                                    <td>Trans Date</td>
                                    <td>Equipment ID</td>
                                    <td>Withdrawal Slip</td>
                                    <td>Liters</td>
                                    <td>Price</td>
                                    <td>Total Amount</td>
                                    
                                </tr>
                            </thead>
                            <tbody id="table_body_diesel">
                               
                                    
                                    <tr>
                                        
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        
                                      
                                    </tr>
                                   
                                
                            </tbody>
            
                           
            
                        </table>
            
                        
                            
                            
                    </div>
        
                  
           </div>
        

  
                </div>
                <div class="modal-footer">
                
                <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                </div>
            </div>
            </div>
        </div>


        <!-- Modal for Diesel List -->

        <div class="modal fade" id="dieselReportList" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog  modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Diesel Transaction List</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

                
                <div class="modal-body">
                    <div class="container mt-3">
                        <label for="dateFrom"
                        >From</label>
                        
                            <input 
                            type="date"
                            name="dateFromDiesel2"
                            id="dateFromDiesel2"
                           
                            >

                    
                        <label for="dateTo"
                        >To</label>
                        
                            <input 
                            type="date"
                            name="dateToDiesel2"
                            id="dateToDiesel2"
                           
                            >
                        <!-- <label for="Equipment"
                            >Equipment</label>
                            <input 
                            type="text"
                            name="equipmentSearchDieselTrans2"
                            id="equipmentSearchDieselTrans2"
                            
                            > -->
                        
                        <button type="submit" onclick="displayDieselData2()" class="btn btn-primary">Search</button>

                        
                    </div>

                    <div  class="container mt-3">
                        <table id="myTableDiesel" class="table table-bordered"  style="text-align: center;">
                            <thead class="table-dark">
                            
                                    <td>Equipment ID</td>
                                    <td>Total Liters</td>
                                    <td>Total Amount</td>
                                    
                                    
                                </tr>
                            </thead>
                            <tbody id="table_body_diesel2">
                               
                                    
                                    <tr>
                                        
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                       
                                        
                                      
                                    </tr>
                                   
                                
                            </tbody>
            
                           
            
                        </table>
            
                        
                            
                            
                    </div>
        
                  
           </div>
        

  
                </div>
                <div class="modal-footer">
                
                <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                </div>
            </div>
            </div>
        </div>


        <!-- Modal Insert Cost Transactions -->
        <div class="modal fade" id="insertcost" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Cost Transaction</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

                
                <div class="modal-body">
                    <label >
                        Date
                    </label>
                    <input 
                        type="date" 
                        name="transDate_cost"
                        id="transDate_cost"
                        
                        class="form-control"
                        
                        >
            
                    <label >
                        Equipment ID
                        </label>
                        <input 
                            type="text" 
                            name="equipment_id_cost"
                            id="equipment_id_cost"
                            
                            class="form-control"
                            
                        >
            
                    <label >
                        Salaries
                        </label>
                        <input 
                            type="number" 
                            name="salaries"
                            id="salaries"
                            step="0.0"
                            class="form-control"
                            onkeyup="getTotalamount();"
                        >
            
                    <label >
                        Fuel
                        </label>
                        <input 
                            type="number" 
                            name="fuel"
                            id="fuel"
                            step="0.0"
                            class="form-control"
                            onkeyup="getTotalamount();"
                        >
            
            
                    <label >
                        Oil & Lubes
                        </label>
                        <input 
                            type="number" 
                            name="oil_lubes"
                            id="oil_lubes"
                            step="0.0"
                            class="form-control"
                            onkeyup="getTotalamount();"
                        >
            
                    <label >
                        Mechanical Supplies
                        </label>
                        <input 
                            type="number" 
                            name="mechanicalSupplies"
                            id="mechanicalSupplies"
                            step="0.0"
                            class="form-control"
                            onkeyup="getTotalamount();"
                        >
            
                    <label >
                        Repair Maintenance
                        </label>
                        <input 
                            type="number" 
                            name="repairMaintenance"
                            id="repairMaintenance"
                            step="0.0"
                            class="form-control"
                            onkeyup="getTotalamount();"
                        >
            
                    <label >
                        Meals
                        </label>
                        <input 
                            type="number" 
                            name="meals"
                            id="meals"
                            step="0.0"
                            class="form-control"
                            onkeyup="getTotalamount();"
                        >
            
                    <label >
                        Transpo
                        </label>
                        <input 
                            type="number" 
                            name="transpo"
                            id="transpo"
                            step="0.0"
                            class="form-control"
                            onkeyup="getTotalamount();"
                        >
                    
                    <label >
                        Tires
                        </label>
                        <input 
                            type="number" 
                            name="tires"
                            id="tires"
                            step="0.0"
                            class="form-control"
                            onkeyup="getTotalamount();"
                        >
            
                    <label >
                        Amortization
                        </label>
                        <input 
                            type="number" 
                            name="amortization"
                            id="amortization"
                            step="0.0"
                            class="form-control"
                            onkeyup="getTotalamount();"
                        >
            
                    <label >
                        Others
                        </label>
                        <input 
                            type="number" 
                            name="others"
                            id="others"
                            step="0.0"
                            class="form-control"
                            onkeyup="getTotalamount();"
                        >
            
                    <label >
                        Total Amount
                        </label>
                        <input 
                            type="number" hidden
                            name="costAmount"
                            id="costAmount"
                            step="0.1"
                            class="form-control"
                            
                        >

                        <input 
                            type="text" 
                            name="totalAmount_cost2"
                            id="totalAmount_cost2"
                           
                            class="form-control"
                            
                        >
            
                    
                    
            
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" onclick="insertCosting()" class="btn btn-primary">Save</button>
                <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                </div>
            </div>
            </div>
        </div>


        <div class="modal fade" id="costList" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog  modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Cost Transaction List</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

                
                <div class="modal-body">
                    <div class="container mt-3">
                        <label for="dateFrom"
                        >From</label>
                        
                       
                        
                            <input 
                            type="date"
                            name="dateFrom_cost"
                            id="dateFrom_cost"
                           
                            >
                
                        <label for="dateTo"
                        >Date To</label>
                        
                            <input 
                            type="date"
                            name="dateTo_cost"
                            id="dateTo_cost"
                            
                            >
                
                        <label for="dateTo"
                        >Equipment ID</label>
                        
                            <input 
                            type="text"
                            name="equipmentIDSearch_cost"
                            id="equipmentIDSearch_cost"
                            
                            >
                        
                        <button type="submit" onclick="displayCostData()" class="btn btn-primary">Search</button>

                        <button type="submit"  onclick="html_table_excel_cost('xlsx')" class="btn btn-secondary">
                            Export Excel
                            <i class="fas fa-database"></i>
                        </button>
                    </div>

                    <div  class="container mt-3">
                        <table id="myTableTons" class="table table-bordered"  style="text-align: center;">
                            <thead class="table-dark">
                                <tr>
                                    <td>Date</td>
                                    <td>Equipment ID</td>
                                    <td>Salaries</td>
                                    <td>Fuel</td>
                                    <td>Oil & Lubes</td>
                                    <td>Mech. Supplies</td>
                                    <td>Repair & Main</td>
                                    <td>Meals</td>
                                    <td>Transpo</td>
                                    <td>Tires</td>
                                    <td>Amortization</td>
                                    <td>Others</td>
                                    <td>Total Cost</td>
                                    <td>Action</td>
                                </tr>
                            </thead>
                            <tbody id="table_body_cost">
                               
                                    
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        
                                    </tr>
                                   
                                
                            </tbody>
            
                           
            
                        </table>
            
                        
                            
                            
                    </div>
        
                  
           </div>
        

  
                </div>
                <div class="modal-footer">
                
                <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                </div>
            </div>
            </div>
        </div>


<!-- ==========================================This is for Employee====================================== -->
        <div class="modal fade" id="employeeList" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog  modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Employee List</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

                
                <div class="modal-body">
                    <div class="container mt-3">
                        
                        <label for="Employee Name"
                        >Search</label>
                        
                            <input 
                            type="text"
                            name="searchInput"
                            id="searchInput"
                            
                            >
                        
                       
                    </div>

                    <div  class="container mt-3">
                        <table id="myTableTons" class="table table-bordered"  style="text-align: center;">
                            <thead class="table-dark">
                                <tr>
                                    <td>Employee ID</td>
                                    <td>First Name</td>
                                    <td>Last Name</td>
                                    <td>Position</td>
                                    <td>Department</td>
                                    <td>On/Off Details</td>
                                    <td>Employement Status</td>
                                    
                                </tr>
                            </thead>
                            <tbody id="table_body_employee">
                            
                                    
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                       
                                        
                                    </tr>
                                
                                
                            </tbody>
            
                        
            
                        </table>
            
                        
                            
                            
                    </div>

                
        </div>



                </div>
                <div class="modal-footer">
                
                <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                </div>
            </div>
            </div>
        </div>
<!-- =======================================This is for  Tonnage Computation of HTML & CSS======================= -->
        <!-- Modal Insert Cost Transactions -->
        <div class="modal fade" id="AddTons" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Tonnage</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

                
                <div class="modal-body">

                    <label >
                        Date
                    </label>
                    <input 
                        type="date" 
                        name="transDate_tons"
                        id="transDate_tons"
                        
                        class="form-control"
                        
                        >
                        
                            
                        <label >
                            Equipment ID
                            </label>
                            <input 
                                type="text" 
                                name="equipmentID_tons"
                                id="equipmentID_tons"
                                class="form-control"
                               
                            >
                
                        <label >
                            Trip Ticket
                            </label>
                            <input 
                                type="text" 
                                name="tripTicket_tons"
                                id="tripTicket_tons"
                                class="form-control"
                                
                            >
                
                
                        <label >
                            Routes
                            </label>
                            <input 
                                type="text" 
                                name="routes_tons"
                                id="routes_tons"
                                class="form-control"
                            >
                
                        <label >
                            Trips
                            </label>
                            <input 
                                type="number" 
                                name="trips"
                                id="trips"
                                step="0.0"
                                class="form-control"
                                
                            >

                        <label >
                            Volume
                            </label>
                            <input 
                            type="number" 
                            name="volTons"
                            id="volTons"
                            step="0.0"
                            class="form-control"
                            
                        >

                            
                
                        <label >
                            Distance
                            </label>
                            <input 
                                type="number" 
                                name="distance_tons"
                                id="distance_tons"
                                step="0.0"
                                class="form-control"
                                
                            >
                
                        <label >
                            Hauling Rate
                            </label>
                            <input 
                                type="number" 
                                name="rate_tons"
                                id="rate_tons"
                                step="0.0"
                                value="44.40"
                                class="form-control"
                               
                            >
    
                            <label >
                                Total Amount
                                </label>
                                <input 
                                    type="text" 
                                    name="totalAmount_tons"
                                    id="totalAmount_tons"
                                   
                                    class="form-control"
                                   
                                >
                
                        <label >
                            Project
                            </label>
                            <select name="project_tons" id="project_tons"class="form-control">
                                <option value="">--SELECT--</option>
                                <option value="TVI">TVI</option>
                                <option value="THEO">THEO</option>
                                
                        
                            </select> 
                        
                        <label >
                            Driver Operator
                            </label>
                            <input 
                                type="text" 
                                name="driverOperatorTons"
                                id="driverOperatorTons"
                                
                                class="form-control"
                                
                            >
        
                
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" id="BtnSave_Tons" name="BtnSave_Tons"  class="btn btn-primary">Save</button>
                <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                </div>
            </div>
            </div>
        </div>


<!-- ==========================================This is for Tonnage List====================================== -->
            <div class="modal fade" id="tonnageList" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog  modal-xl" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Tonnage List</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>

                    
                    <div class="modal-body">
                        <div class="container mt-3">
                            
                            <label for="DateFRomTons"
                            >Date From</label>
                            
                                <input 
                                type="date"
                                name="datefrom_tons"
                                id="datefrom_tons"
                                
                                >

                            <label for="DateToTons"
                            >Date To</label>
                            
                                <input 
                                type="date"
                                name="dateto_tons"
                                id="dateto_tons"
                                
                                >

                            <label for="EquipmentID Tons"
                            >Equipment ID</label>
                            
                                <input 
                                type="text"
                                name="equipmentIDSearch_tons"
                                id="equipmentIDSearch_tons"
                                
                                >

                            <label for="Project Site"
                            >Project Site</label>
                            
                                <input 
                                type="text"
                                name="prjectSiteSearch_tons"
                                id="prjectSiteSearch_tons"
                                
                                >
                            
                            <button type="button" id="BtnSearch_Tons" name="BtnSearch_Tons"  class="btn btn-secondary">Search</button>
                            <button type="submit" onclick="html_table_excel_tonnage2('xlsx')"   class="btn btn-success">Excel</button>
                            <!-- <button type="button" id="excelExportTons"    class="btn btn-success">Excel</button> -->

                        </div>

                        <div  class="container mt-3">
                            <table id="myTableTons" class="table table-bordered"  style="text-align: center;">
                                <thead class="table-dark">
                                    <tr>
                                        <td>ID</td>
                                        <td>Date</td>
                                        <td>Equipment ID</td>
                                        <td>Trip Ticket</td>
                                        <td>Routes</td>
                                        <td>Trips</td>
                                        <td>Volume</td>
                                        <td>Distance</td>
                                        <td>Rate/Tons</td>
                                        <td>Amount</td>
                                        <td hidden>Amount</td>
                                        <td>Action</td>
                                        
                                    </tr>
                                </thead>
                                <tbody id="table_body_tons">
                                
                                        
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td hidden></td>
                                            <td></td>
                                        </tr>
                                    
                                    
                                </tbody>
                
                            
                
                            </table>
                
                            
                                
                                
                        </div>

                    
            </div>



            </div>
                    <div class="modal-footer">
                        <label for="Equipment" >Total Trip</label>
                            <input
                                type="Text"
                                name="fter_totalTrip"
                                id="fter_totalTrip"
                                style="text-align: right;"
                                >
                            </input> 

                        

                            <label for="Equipment" >Total Amount</label>
                            <input
                                type="text"
                                name="fter_totalBillinglTons"
                                id="fter_totalBillinglTons"
                                style="text-align: right;"
                                >
                            </input> 

                    
                    <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                    
                </div>
                </div>
                </div>
            </div>
                


<!-- ==========================================This is for Tonnage List====================================== -->
            <div class="modal fade" id="incentivesList" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog  modal-xl" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Incentive List</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>

                    
                    <div class="modal-body">
                        <div class="container mt-3">
                            
                            <label for="DateFRomTons"
                            >Date From</label>
                            
                                <input 
                                type="date"
                                name="datefrom_incentive"
                                id="datefrom_incentive"
                                
                                >

                            <label for="DateToTons"
                            >Date To</label>
                            
                                <input 
                                type="date"
                                name="dateto_inct"
                                id="dateto_inct"
                                
                                >

                            <label for="EquipmentID Tons"
                            >Equipment ID</label>
                            
                                <input 
                                type="text"
                                name="equipmentIDSearch_inct"
                                id="equipmentIDSearch_inct"
                                
                                >


                                
            
                            
                            <button type="button" id="BtnSearch_incentives" name="BtnSearch_incentives"  class="btn btn-secondary">Search</button>
                        
                            <input 
                                type="text"
                                name="autoSearch_incentive"
                                id="autoSearch_incentive"
                                placeholder="Driver/Equipment ID"
                                >

                        </div>

                        <div  class="container mt-3">
                            <table id="myTableTons" class="table table-bordered"  style="text-align: center;">
                                <thead class="table-dark">
                                    <tr>
                                        
                                        <td>Equipment ID</td>
                                        <td>Routes</td>
                                        <td>Trips</td>
                                        <td>Distance</td>
                                        <td>Driver</td>
                                        <td>Incentives</td>
                                        
                                        
                                    </tr>
                                </thead>
                                <tbody id="table_body_incentive"  style="text-align: right;">
                                
                                        
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                           
                                        </tr>
                                    
                                    
                                </tbody>
                
                            
                
                            </table>
                
                            
                                
                                
                        </div>

                    
            </div>



            </div>
                    <div class="modal-footer">
                        <label for="Equipment" >Total Trip</label>
                            <input
                                type="Text"
                                name="flter_totalTrip_inct"
                                id="flter_totalTrip_inct"
                                style="text-align: right;"
                                >
                            </input> 

                        

                            <label for="Equipment" >Total Amount</label>
                            <input
                                type="text"
                                name="flter_totalIncentives"
                                id="flter_totalIncentives"
                                style="text-align: right;"
                                >
                            </input> 

                    
                    <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                    
                </div>
                </div>
                </div>
            </div>
                


<!-- =======================================This is for Adding Routes of HTML & CSS======================= -->
        
        <div class="modal" id="addRoutes" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Routes</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

                
                <div class="modal-body">

                
                        <label >
                            Routes
                            </label>
                            <input 
                                type="text" 
                                name="routes_routes"
                                id="routes_routes"
                                class="form-control"
                            >
                
                       
                        <label >
                            Distance
                            </label>
                            <input 
                                type="number" 
                                name="distance_routes"
                                id="distance_routes"
                                step="0.0"
                                class="form-control"
                                
                            >
                
                        
        
                
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <!-- <button type="submit" onclick="addtviroutes()" class="btn btn-primary">Save</button> -->
                <button type="button" id="insertRoutes" class="btn btn-primary">Save</button>
                <!-- <button type="button" name ="save_button" id="save_button" class="btn btn-success">Save</button> -->
                </div>
            </div>
            </div>
        </div>
       

<!-- =======================================Java Script Function for Automatic Display============================ -->
       <script type="text/javascript">

            // function updateInputValue() {
            //     var volume_tons = document.getElementById("volume_tons");
            //     var volume_tons2 = document.getElementById("volume_tons2");

            //     volume_tons2.value = volume_tons.value;
            // }
   
       </script>
        
        
        
        <script type="text/javascript">
            async function employeeData(){
                const search_url = `/api-get-tvi-employeeDetails-employeeLogin/`;
                    const responce =  await fetch(search_url)
                    const data =  await responce.json();
                    console.log(data)

                    function filterData(searchValue) {
                        return data.filter(item => {
                            const lastName = item.lastName.toLowerCase();
                            const firstName = item.firstName.toLowerCase();
                            const position = item.position.toLowerCase();
                            return lastName.includes(searchValue) || firstName.includes(searchValue) || position.includes(searchValue);
                        });
                    }

                    function displayData(filteredData) {
                        const tbody = document.querySelector("#table_body_employee");
                        tbody.innerHTML = "";
                        filteredData.forEach(item => {
                            const tr = document.createElement("tr");
                            const employee_id = document.createElement("td");
                            employee_id.textContent = item.employee_id;
                            const lastName = document.createElement("td");
                            lastName.textContent = item.lastName;
                            const firstName = document.createElement("td");
                            firstName.textContent = item.firstName;
                            const position = document.createElement("td");
                            position.textContent = item.position;
                            const department = document.createElement("td");
                            department.textContent = item.department;
                            const off_on_details = document.createElement("td");
                            off_on_details.textContent = item.off_on_details;
                            const employment_status = document.createElement("td");
                            employment_status.textContent = item.employment_status;


                            tr.appendChild(employee_id);
                            tr.appendChild(lastName);
                            tr.appendChild(firstName);
                            tr.appendChild(position);
                            tr.appendChild(department);
                            tr.appendChild(off_on_details);
                            tr.appendChild(employment_status);
                            tbody.appendChild(tr);
                        });
                    }

                    const searchInput = document.querySelector("#searchInput");
                    searchInput.addEventListener("input", event => {
                        const searchValue = event.target.value.trim().toLowerCase();
                        const filteredData = filterData(searchValue);
                        displayData(filteredData);
                    });




            }
           
            employeeData()
        </script>
                
<!-- ===========================================for Java Scripts Function=========================================== -->

            <script type="text/javascript">
                const html_table_excel_tonnage2 = (type) => {
                    var data = document.getElementById('table_body_tons');
                    var file = XLSX.utils.table_to_book(data,{sheet: "sheet1"});
                    XLSX.write(file,{ booktype: type, bookSST: true, type: 'base64'});
                    XLSX.writeFile(file, 'tonnagelist.' + type);
                    };

                // var excelExportTons = document.querySelector('#excelExportTons');
                // excelExportTons.addEventListener("click", html_table_excel_tonnage2('xlsx'));
            </script>
            <script>
                function printPageRentalList() {
                    window.print();
                    }
            </script>
         



        
        
            <!-- this is for auto complete input  -->

            <script>
                $( function() { 
                            $("#equipment_id").autocomplete({
                            source: "/api-search-autocomplete-tvi-equipment2/"
                            });
        
                        } );
        
            </script>

    <!-- This function is for auto generate of Rental Rate -->
            <script>
                $(document).ready(function() {
                $("#equipment_id").on("keyup", async function(event) {
                    // check if Enter key was pressed
                    if (event.keyCode === 13 ) {
                    // trigger button click event
                        var equipment_id = document.getElementById("equipment_id").value

                        const search_url = `/api-search-tvi-equipmentID/?term=${equipment_id}`;


                        const responce =  await fetch(search_url)
                        const data =  await responce.json();
                        console.log(data)
                        

                        if (data.length === 0){
                            window.alert(`No ID store for ${equipment_id}`)
                        }else{
                            var rental_rate = data[0].rentalRate
                            var project_site = data[0].project_site
                        
                            document.getElementById("rental_rate").value = rental_rate
                            document.getElementById("project_site").value = project_site
                            calculateProduct()
                            calculateProductRental()

                        }
                   
                    }
                });
            });       

               
                                

            </script>

               


            <script>

                $( function() {
                    
                    $( "#equipmentIdDiesel" ).autocomplete({
                    source: "/api-search-autocomplete-equipment-rizal/",

                    });
                } );


            </script>


            <script>

                $( function() {
                    
                    $( "#equipmentID_Tons" ).autocomplete({
                    source: "/api-search-autocomplete-equipment-rizal/"
                    });
                } );


            </script>

            <script>

                $( function() {
                    
                    $( "#equipment_id_cost" ).autocomplete({
                    source: "/api-search-autocomplete-equipment-rizal/"
                    });
                } );


            </script>

<!-- ================================This is for inserting Rizal Equipment Rental By employee Login=================== -->
            
            <!-- This function is for  -->
            <script>
                $(document).ready(function() {
                $('#start, #end').change(function() {
                    const startDate = new Date($('#start').val()).getTime();
                    const endDate = new Date($('#end').val()).getTime();
                    const elapsed = endDate - startDate;
                    const elapsedInSeconds = (elapsed / 1000) / 60 / 60;
                    // console.log(startDate,elapsedInSeconds)

                    totalHours = elapsedInSeconds.toFixed(2)
                    $('#total_rental_hour').val(totalHours);
                    calculateProduct()
                    calculateProductRental()
                    
                });
                });

                
            </script>
            
            
            
            
            
            <script type="text/javascript">
                // // Define an async function to insert equipment
                // async function insertRental() {
                // // Get the values of the input fields
                // const data = {
                //     transDate: document.getElementById("trans_date").value,
                //     demr:  document.getElementById("demr_form").value,
                //     equipmentId: document.getElementById("equipment_id").value,
                //     time_in: document.getElementById("start").value,
                //     time_out: document.getElementById("end").value,
                //     totalHours: document.getElementById("total_rental_hour").value,
                //     rentalRate: document.getElementById("rental_rate").value,
                //     totalAmount: document.getElementById("rental_amount").value,
                //     taxRate: document.getElementById("taxRateTransaction").value,
                //     vat_output: document.getElementById("vatOutputRentalTrans").value,
                //     net_of_vat: document.getElementById("netOfVAtRentalTrans").value,
                //     project_site: document.getElementById("project_site").value,
                //     driverOperator: document.getElementById("driverOperator").value,
                // };
                // console.log(data)
                // // Use the fetch API to send the POST request

                // if (data.taxRate=='' || data.transDate == ''){
                //                 window.alert("Please fill up Blank flieds/field"); 
                //             }
                //             else{

                //                 try {
                //                         const response = await fetch(`/api-insert-tvi-rental-employeeLogin/`, {
                //                         method: "POST",
                //                         headers: { "Content-Type": "application/json" },
                //                         body: JSON.stringify(data)
                //                         });
                                
                //                         // Check if the response was successful
                //                         if (response.status === 200) {
                //                         window.alert("Your data has been saved");
                //                         console.log(data);
                //                         window.location.assign("/employee-transaction-tvi/");
                                        
                //                         } else if (response.status === 401) {
                //                         window.alert("Unauthorized credential. Please login");
                //                         }
                //                     } catch (error) {
                //                         // Catch any errors and log them to the console
                //                         window.alert(error);
                //                         console.log(error);
                //                     }
                                                    
                //                  }
                
                // }


                
            </script>



<!-- ====================================This is for computation of Total amount==================================== -->
        <script>
            $(document).ready(function() {
               $('#total_rental_hour, #rental_rate').on('input', function() {
                calculateProductRental();
               });
               });

               function calculateProductRental() {

               var rental_rate = parseFloat($('#rental_rate').val());
               
               var total_rental_hour = parseFloat($('#total_rental_hour').val());
               
               
               var product = total_rental_hour * rental_rate;

               var product2 = parseFloat(product).toFixed(2)
               $('#rental_amount').val(product2);
               }

           

        </script>

<!-- ============================ This function is for computaion of rental Amount with Comma ================ -->
            <script type="text/javascript">
                    // Get input fields and result element
                var input1 = document.getElementById("total_rental_hour");
                var input2 = document.getElementById("rental_rate");
                

                // Add event listener to inputs
                input1.addEventListener("input", calculateProduct);
                input2.addEventListener("input", calculateProduct);

                function calculateProduct() {
                // Get input field values
                var value1 = parseFloat(input1.value);
                var value2 = parseFloat(input2.value);

                // Calculate product
                var product = value1 * value2;

                let comma = product.toLocaleString("en-US");

                document.getElementById("rental_amount2").value = comma;

                }

            </script>

<!-- ==================================This function is for Computation of Vat and Net of Vat===================== -->
            <script>
                $(document).ready(function() {
                    $('#rental_amount2, #taxRateTransaction \
                    ').on('input', function() {
                        calculateVAT();
                    });
                    });

                    function calculateVAT() {

                    var rental_amount = parseFloat($('#rental_amount').val());
                    
                    var taxRateTransaction = parseFloat($('#taxRateTransaction').val());
                    
                    
                    
                    var vatComputation = rental_amount / 1.12 * taxRateTransaction;
                    var netOfVAtRentalTrans = rental_amount - vatComputation;
                   

                    var vatComputation2 = parseFloat(vatComputation).toFixed(2)
                    var netOfVAtRentalTrans2 = parseFloat(netOfVAtRentalTrans).toFixed(2)   

                    $('#vatOutputRentalTrans').val(vatComputation2);
                    $('#netOfVAtRentalTrans').val(netOfVAtRentalTrans2);
                    }


            </script>



<!-- ====================================This function is for Displaying Rental Data to Table========================= -->
        <script type="text/javascript">

            // const rental_url =search_url ;
            async function display_data(){
                var datefrom = document.getElementById("datefromRental").value
                var dateto = document.getElementById("datetoRental").value
                var equipmentID = document.getElementById("equipment_id_searchRental").value
                var project_site = document.getElementById("project_site_search").value

                const search_url = `/api-get-tvi-rental-employeeLogin/?datefrom=${datefrom}&dateto=${dateto}&equipmentId=${equipmentID}&project_site=${project_site}`;


                const responce = await fetch(search_url)
                const data = await responce.json();
                console.log(data)

                if (data.length === 0) {
                        window.alert('No Data available');
                    };
                
                
                if (responce.status === 200){
                    let tableData="";
                    data.map((values)=>{
                        tableData+= ` <tr>
                                    <td>${values.id}</td>
                                    <td>${values.transDate}</td>
                                    <td>${values.equipmentId}</td>
                                    <td>${values.demr}</td>
                                    <td>${values.totalHours}</td>
                                    <td>${values.rentalRate}</td>
                                    <td>${values.totalAmount}</td>
                                    <td>${values.net_of_vat}</td>
                                    <td>${values.project_site}</td>
                                    <td>
                                   
                                    </td>
                                
                                </tr>`;
                    });
                    document.getElementById("table_body").innerHTML=tableData;

                }else if (responce.status === 401){
                    window.alert("Unauthorized Credentials Please Log in")
                }
            
            }

        </script>

<!-- ====================================This function is for Displaying Rental Data to Table========================= -->
        <script type="text/javascript">

            // const rental_url =search_url ;
            async function display_RentalSum(){
                var datefrom = document.getElementById("datefromRental2").value
                var dateto = document.getElementById("datetoRental2").value
                var equipmentID = document.getElementById("equipment_id_searchRental2").value
               

                const search_url = `/api-get-rentalSum-employeeLogin/?datefrom=${datefrom}&dateto=${dateto}&equipmentId=${equipmentID}`;


                const responce = await fetch(search_url)
                const data = await responce.json();
                console.log(data)

                if (data.length === 0) {
                        window.alert('No Data available');
                    };
                
                
                if (responce.status === 200){
                    let tableData="";
                    data.map((values)=>{
                        tableData+= ` <tr>
                                    
                                    <td>${values.equipmentId}</td>
                                    <td>${values.totalHours}</td>
                                    <td>${values.rentalRate}</td>
                                    <td>${values.totalAmount}</td>
                                    
                                
                                
                                </tr>`;
                    });
                    document.getElementById("table_bodyRentalReport").innerHTML=tableData;

                }else if (responce.status === 401){
                    window.alert("Unauthorized Credentials Please Log in")
                }
            
            }

        </script>



        <!-- This function is for exporting Excel of Rental transaction -->
            <script>
                function html_table_excel_rental(type){
                    var data = document.getElementById('table_body');
                    var file = XLSX.utils.table_to_book(data,{sheet: "sheet1"});
                    XLSX.write(file,{ booktype: type, bookSST: true, type: 'base64'});
                    XLSX.writeFile(file, 'rentalList.' + type);

                }

                
            </script>

<!-- ====================================This is for computation of Total amount Diesel==================================== -->
        <script>
            $(document).ready(function() {
            $('#totalliters, #priceDiesel').on('input', function() {
                calculateProduct_diesel();
            });
            });

            function calculateProduct_diesel() {

            var totalLiters = parseFloat($('#totalliters').val());
            
            var priceDiesel = parseFloat($('#priceDiesel').val());
            
            
            var product = totalLiters * priceDiesel;
           
            var product2 = parseFloat(product).toFixed(2)
           
            $('#totalAmountDiesel').val(product2);
            }

        


        </script>

<!-- ============================ This function is for computaion of Diesel Total Amount with Comma ================ -->
            <script>
                $(document).ready(function() {
                $('#totalliters, #priceDiesel').on('input', function() {
                    calculateProduct2();
                });
                });

                function calculateProduct2() {

                var totalLiters = $('#totalliters').val();
                
                var priceDiesel = $('#priceDiesel').val();
                
                
                var product = totalLiters * priceDiesel;
                var product2 = parseFloat(product).toFixed(2)
                // var floatValue = product2.toLocaleString('en-US');
                const stringNumber = product.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
                $('#totalAmountDiesel2').val(stringNumber);
                }




            </script>

<!-- ================================This is for inserting Diesel  By employee Login=================== -->

            <!-- This is for auto complete of Equipment ID -->
            <script>
                $( function() { 
                            $("#equipmentIdDiesel").autocomplete({
                            source: "/api-search-autocomplete-tvi-equipment2/"
                            });

                        } );

            </script>

                <script type="text/javascript">
                    // Define an async function to insert equipment
                    async function insertDiesel() {
                    // Get the values of the input fields

                    let priceValue = document.getElementById("priceDiesel").value
                    priceValue = parseFloat(priceValue).toFixed(2)
                    const data = {
                        transDate: document.getElementById("transDateDiesel").value,
                        equipmentId: document.getElementById("equipmentIdDiesel").value,
                        withdrawalSlip: document.getElementById("withdrawalSlipDiesel").value,
                        totalliters: document.getElementById("totalliters").value,
                        price: priceValue,
                        totalAmount: document.getElementById("totalAmountDiesel").value,
                        
                        
                    };
                    console.log(data.transaction_date)

                    // Use the fetch API to send the POST request
                    try {

                        const search_url_SEARCH = `/api-search-tvi-diesel-withDrawalSlip/?withdrawalSlip=${data.withdrawal_slip}`;


                        const responceSEARCH = await fetch(search_url_SEARCH)
                        const dataSEARCH = await responceSEARCH.json();
                        console.log(dataSEARCH)

                        if (dataSEARCH.length > 0) {
                            window.alert("Your data has already EXIST please check Diesel List");
                            
                            } else {
                                const response = await fetch(`/api-insert-tvi-diesel-employeeLogin/`, {
                                method: "POST",
                                headers: { "Content-Type": "application/json" },
                                body: JSON.stringify(data)
                                });

                                // Check if the response was successful
                                if (response.status === 200) {
                                window.alert("Your data has been saved");
                                console.log(data);
                                window.location.assign("/employee-transaction-tvi/");
                                
                                } else if (response.status === 401) {
                                window.alert("Unauthorized credential. Please login");
                                };
                            }

                        
                        
                    } catch (error) {
                        // Catch any errors and log them to the console
                        window.alert(error);
                        console.log(error);
                    }
                    }
                </script>

                   
<!-- ====================================This function is for Displaying Rental Data to Table========================= -->
            <script type="text/javascript">

                // const rental_url =search_url ;
                async function displayDieselData(){
                    var datefrom = document.getElementById("dateFromDiesel").value
                    var dateto = document.getElementById("dateToDiesel").value
                    var equipmentID = document.getElementById("equipmentSearchDieselTrans").value

                    const search_url = `/api-search-tvi-diesel-trans/?datefrom=${datefrom}&dateto=${dateto}&equipmentId=${equipmentID}`;


                    const responce = await fetch(search_url)
                    const data = await responce.json();
                    console.log(data)

                    if (data.length === 0) {
                            window.alert('No Data available');
                        };
                    
                    
                    if (responce.status === 200){
                        let tableData="";
                        data.map((values)=>{
                            tableData+= ` <tr>
                                        <td>${values.id}</td>
                                        <td>${values.transDate}</td>
                                        <td>${values.equipmentId}</td>
                                        <td>${values.withdrawalSlip}</td>
                                        <td>${values.totalliters}</td>
                                        <td>${values.price}</td>
                                        <td>${values.totalAmount}</td>
                                        
                                    
                                    
                                    </tr>`;
                        });
                        document.getElementById("table_body_diesel").innerHTML=tableData;

                    }else if (responce.status === 401){
                        window.alert("Unauthorized Credentials Please Log in")
                    }
                
                }

            </script>


<!-- ====================================This function is for Displaying Rental Data to Table========================= -->
        <script type="text/javascript">

            // const rental_url =search_url ;
            async function displayDieselData2(){
                var datefrom = document.getElementById("dateFromDiesel2").value
                var dateto = document.getElementById("dateToDiesel2").value
                // var equipmentID = document.getElementById("equipmentSearchDieselTrans2").value

                const search_url = `/api-get-tvi-diesel-employeeLogin/?datefrom=${datefrom}&dateto=${dateto}`;


                const responce = await fetch(search_url)
                const data = await responce.json();
                console.log(data)

                if (data.length === 0) {
                        window.alert('No Data available');
                    };
                
                
                if (responce.status === 200){
                    let tableData="";
                    data.map((values)=>{
                        tableData+= ` <tr>
                                    <td>${values.equipmentId}</td>
                                    <td>${values.totalliters}</td>
                                    <td>${values.totalAmount}</td>
                                  
                                
                                
                                </tr>`;
                    });
                    document.getElementById("table_body_diesel2").innerHTML=tableData;

                }else if (responce.status === 401){
                    window.alert("Unauthorized Credentials Please Log in")
                }
            
            }

        </script>



        <script>
            function html_table_excel(type){
                var data = document.getElementById('table_body_diesel');
                var file = XLSX.utils.table_to_book(data,{sheet: "sheet1"});
                XLSX.write(file,{ booktype: type, bookSST: true, type: 'base64'});
                XLSX.writeFile(file, 'dieselList.' + type);

            }

            
        </script>


<!-- ===================================This function is for Tonnage Employee Login============================ -->
            <!-- This function is for calculating Total Amount for Tons -->
            <script>
                $(document).ready(function() {
                $('#totalTons_Tons, #rate_Tons').on('input', function() {
                    calculateProduct_amountTons();
                });
                });

                function calculateProduct_amountTons() {

                var totalTons_Tons = $('#totalTons_Tons').val();
                
                var rate_Tons = $('#rate_Tons').val();
                
                var product = totalTons_Tons * rate_Tons;
            
                $('#amount_Tons').val(product);
                }

            </script>


            <script>
                $(document).ready(function() {
                $('#totalTons_Tons, #rate_Tons').on('input', function() {
                    calculateProduct_amountTons2();
                });
                });

                function calculateProduct_amountTons2() {

                var totalTons_Tons = $('#totalTons_Tons').val();
                
                var rate_Tons = $('#rate_Tons').val();
                
                var product = totalTons_Tons * rate_Tons;
                
                // var floatValue = product.toLocaleString('en-US');
                const stringNumber = product.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
                $('#amount_Tons2').val(stringNumber);
                }




            </script>


            <!-- This is to insert Equipment to tvi table -->
            <script type="text/javascript">
                // Define an async function to insert equipment
                async function inserttonnageHauling() {
                // Get the values of the input fields
                const data = {
                    transDate: document.getElementById("transDate_Tons").value,
                    equipment_id: document.getElementById("equipmentID_Tons").value,
                    tripTicket: document.getElementById("tripTicket_Tons").value,
                    totalTrip: document.getElementById("totalTrip_Tons").value,
                    totalTonnage: document.getElementById("totalTons_Tons").value,
                    rate: document.getElementById("rate_Tons").value,
                    amount: document.getElementById("amount_Tons").value,
                    driverOperator: document.getElementById("driver_operator_Tons").value,
                    
                    
                };
            
                // Use the fetch API to send the POST request
                try {
                    const response = await fetch(`/api-insert-rizalTonnage-employeeLogin/`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(data)
                    });
            
                    // Check if the response was successful
                    if (response.status === 200) {
                    window.alert("Your data has been saved");
                    console.log(data);
                    window.location.assign("/employee-rizal-equipment-rental/");
                    
                    } else if (response.status === 401) {
                    window.alert("Unauthorized credential. Please login");
                    }
                } catch (error) {
                    // Catch any errors and log them to the console
                    window.alert(error);
                    console.log(error);
                }
                }
            </script>


            <!-- This function is to Display List from Tonnage Transaction -->


            <script type="text/javascript">
                // const rental_url =search_url ;
                async function displayTonnageData(){
                    var dateFrom = document.getElementById('dateFrom_Tons').value;
                    var dateTo = document.getElementById('dateTo_Tons').value;
                    var equipmentIDSearch = document.getElementById('equipmentIDSearch_Tons').value;
                
                const search_url = `/api-get-tonnage-rizal-employeeLogin/?datefrom=${dateFrom}&dateto=${dateTo}&equipment_id=${equipmentIDSearch}`;
    
                
                const responce = await fetch(search_url)
                const data = await responce.json();
                console.log(data)
                
                if (responce.status === 200) {
                    let tableData2="";
                    data.map((values)=>{
                        tableData2+= ` <tr>
                                   
                                    <td>${values.transDate}</td>
                                    <td>${values.equipment_id}</td>
                                    <td>${values.totalTrip}</td>
                                    <td>${values.totalTonnage}</td>
                                    <td>${values.rate}</td>
                                    <td>${values.amount}</td>
                                    <td>${values.totalAmount}</td>
                                    <td>${values.driverOperator}</td>
    
                                    <td>
                                        
                                    </td>
                            
                                
                                </tr>`;
                    });
                        document.getElementById("table_body_tonnage").innerHTML=tableData2;
                    }else if (responce.status === 401){
                        window.alert("Unauthorized credential. Please login");
                    }
                
                }
                
            
            </script>

            <script>
                function html_table_excel_tonnage(type){
                    var data = document.getElementById('table_body_tonnage');
                    var file = XLSX.utils.table_to_book(data,{sheet: "sheet1"});
                    XLSX.write(file,{ booktype: type, bookSST: true, type: 'base64'});
                    XLSX.writeFile(file, 'tonnageList.' + type);

                }

                
            </script>


<!-- ====================================Cost Transaction =============================================== -->
            <script type="text/javascript"> 
                function getTotalamount(){
                

                    var salaries = parseFloat(document.getElementById("salaries").value);
                    var fuel = parseFloat(document.getElementById("fuel").value);
                    var oil_lubes = parseFloat(document.getElementById("oil_lubes").value);
                    var mechanicalSupplies = parseFloat(document.getElementById("mechanicalSupplies").value);
                    var repairMaintenance = parseFloat(document.getElementById("repairMaintenance").value);
                    var meals = parseFloat(document.getElementById("meals").value);
                    var transpo = parseFloat(document.getElementById("transpo").value);
                    var tires = parseFloat(document.getElementById("tires").value);
                    var amortization = parseFloat(document.getElementById("amortization").value);
                    var others = parseFloat(document.getElementById("others").value);
                // totalAmount: document.getElementById("totalAmount").value,
                
                    var totalAmount;
            
                    totalAmount = (salaries + fuel + oil_lubes + mechanicalSupplies +
                                    repairMaintenance + meals + transpo +
                                    tires + amortization + others );

                    const stringNumber = totalAmount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');

                    document.getElementById('totalAmount_cost2').value=stringNumber;	
                    document.getElementById('costAmount').value=totalAmount.toFixed(2);
                        
                    
                
                }

            </script>


             <!-- This is to insert Cost to cost table Rizal -->
            <script type="text/javascript">
                // Define an async function to insert equipment
                async function insertCosting() {
                // Get the values of the input fields
                const data = {
                    transDate: document.getElementById("transDate_cost").value,
                    equipment_id: document.getElementById("equipment_id_cost").value,
                    salaries: document.getElementById("salaries").value,
                    fuel: document.getElementById("fuel").value,
                    oil_lubes: document.getElementById("oil_lubes").value,
                    mechanicalSupplies: document.getElementById("mechanicalSupplies").value,
                    repairMaintenance: document.getElementById("repairMaintenance").value,
                    meals: document.getElementById("meals").value,
                    transpo: document.getElementById("transpo").value,
                    tires: document.getElementById("tires").value,
                    amortization: document.getElementById("amortization").value,
                    others: document.getElementById("others").value,
                    totalAmount: document.getElementById("costAmount").value,
                
                    
                };
            
                // Use the fetch API to send the POST request
                try {
                    const response = await fetch(`/api-insert-rizal-cost-employeeLogin/`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(data)
                    });
            
                    // Check if the response was successful
                    if (response.status === 200) {
                    window.alert("Your data has been saved");
                    console.log(data);
                    window.location.assign("/employee-rizal-equipment-rental/");
                    
                    } else if (response.status === 401) {
                    window.alert("Unauthorized credential. Please login");
                    }
                } catch (error) {
                    // Catch any errors and log them to the console
                    window.alert(error);
                    console.log(error);
                }
                }
            </script>


            <!-- This function is for displaying Tonnage Hauling Data -->

        <script type="text/javascript">
            // const rental_url =search_url ;
            async function displayCostData(){
                var dateFrom = document.getElementById('dateFrom_cost').value;
                var dateTo = document.getElementById('dateTo_cost').value;
                var equipmentID = document.getElementById('equipmentIDSearch_cost').value;
            
            const search_url = `/api-get-rizal-cost-employeeLogin/?datefrom=${dateFrom}&dateto=${dateTo},&equipment_id=${equipmentID}`;

            
            const responce = await fetch(search_url)
            const data = await responce.json();
            console.log(data)
            
            if (responce.status === 200) {
                let tableData2="";
                data.map((values)=>{
                    tableData2+= ` <tr>
                               
                                <td>${values.transDate}</td>
                                <td>${values.equipment_id}</td>
                                <td>${values.salaries}</td>
                                <td>${values.fuel}</td>
                                <td>${values.oil_lubes}</td>
                                <td>${values.mechanicalSupplies}</td>
                                <td>${values.repairMaintenance}</td>
                                <td>${values.meals}</td>
                                <td>${values.transpo}</td>
                                <td>${values.tires}</td>
                                <td>${values.amortization}</td>
                                <td>${values.others}</td>
                                <td>${values.totalAmount}</td>


                                <td>
                                   
                                </td>
                        
                            
                            </tr>`;
                });
                    document.getElementById("table_body_cost").innerHTML=tableData2;
                }else if (responce.status === 401){
                    window.alert("Unauthorized credential. Please login");
                }
            
            }
            
            


        </script>

        <script>
            function html_table_excel_cost(type){
                var data = document.getElementById('table_body_cost');
                var file = XLSX.utils.table_to_book(data,{sheet: "sheet1"});
                XLSX.write(file,{ booktype: type, bookSST: true, type: 'base64'});
                XLSX.writeFile(file, 'cost.' + type);

            }

            
        </script>


    <script src="/static/tvi.js"></script>
        

</body>

{% endblock %}